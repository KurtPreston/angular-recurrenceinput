/*! angular-recurrenceinput 09-12-2013 */
!function(a,b,c,d){"use strict";var e={};e["ridisplay.html"]='<style>\n\n        div.riform h1 {\n            color: #888888;\n            border-bottom: 1px solid #DDDDDD;\n            font-size: 20px;\n            line-height: 1;\n            margin: 0;\n            padding-bottom: 5px;\n            padding-left: 5px;\n        }\n\n        div.riform form {\n            margin-bottom: 0;\n        }\n\n        div.riform .rifield {\n            clear: both;\n        }\n\n            div.riform .rifield .field {\n                float: left;\n                clear: none;\n            }\n\n        div.riform .rilabel {\n            display: block;\n            float: left;\n            font-weight: bold;\n            margin-right: 10px;\n            text-align: right;\n            width: 130px;\n        }\n\n        div.riform .rirtemplate {\n            margin-top: 6px;\n        }\n\n    div.riformfields {\n        min-height: 11em;\n        min-width: 25em;\n    }\n\n    div.riform .rirangeoptions input,\n    div.riform .rimonthlyoptions input,\n    div.riform .riyearlyoptions input {\n        margin: 0;\n    }\n\n    div.riform .riweeklyweekdays .riweeklyweekday input {\n        display: block;\n        margin: 8px auto 0;\n    }\n\n    div.riform .riweeklyweekdays .riweeklyweekday label {\n        display: block;\n    }\n\n    div.riform .riweeklyweekdays .riweeklyweekday {\n        margin-right: 15px;\n        float: left;\n    }\n\n    div.riform input.ricancelbutton {\n        background-image: url(pb_close.png);\n        background-color: transparent;\n        font-size: 0; /* For IE8 */\n        color: transparent;\n        border: none;\n        position: absolute;\n        left: -14px;\n        top: -14px;\n        cursor: pointer;\n        height: 30px;\n        width: 30px;\n    }\n\n    div.rioccurrencesactions .riaddoccurrence #adddate {\n        width: 75%;\n    }\n\n    div.rioccurrencesactions .rioccurancesheader {\n        border-bottom: 1px solid #DDDDDD;\n        line-height: 1.5;\n        clear: both;\n        margin-top: 30px;\n    }\n\n        div.rioccurrencesactions .rioccurancesheader h2 {\n            color: #888888;\n            display: inline;\n            font-size: 18px;\n            font-weight: bold;\n            margin: 0px 0px 5px 5px;\n        }\n\n\n    div.rioccurrences div.batching {\n        font-size: 70%;\n        text-align: center;\n    }\n\n    div.rioccurrences span.current {\n        font-weight: bold;\n    }\n\n    div.riform span.action a {\n        height: 19px;\n        width: 19px;\n        overflow: hidden;\n        float: right;\n        text-indent: 9999px;\n    }\n\n    div.rioccurrences .occurrence {\n        border-top: 1px solid transparent;\n        border-bottom: 1px solid transparent;\n    }\n\n        div.rioccurrences .occurrence:hover {\n            border-top: 1px solid #DDDDDD;\n            border-bottom: 1px solid #DDDDDD;\n        }\n\n        div.rioccurrences .occurrence.start span.rlabel,\n        div.rioccurrences .occurrence.rdate span.rlabel {\n            color: #9CBA9B;\n            margin: 0 5px;\n            font-size: 70%;\n            font-weight: bold;\n        }\n\n        div.rioccurrences .occurrence.exdate {\n            opacity: 0.4;\n            filter: alpha(opacity=40);\n        }\n\n    div.ridisplay .occurrence.exdate {\n        display: none;\n    }\n\n    div.rioccurrences .occurrence.rdate {\n        background: #FFFFE0;\n    }\n\n    div.rioccurrences div.occurrence {\n        margin-left: 5px;\n    }\n\n    div.rioccurrences a.rrule,\n    div.rioccurrences a.rdate,\n    div.rioccurrences a.exdate {\n        color: transparent;\n        margin-top: 6px;\n        margin-right: 5px;\n    }\n\n\n    div.rioccurrences a.rrule {\n        background-image: url(delete.png);\n    }\n\n    div.rioccurrences a.rdate {\n        background-image: url(delete.png);\n    }\n\n    div.rioccurrences a.exdate {\n        background-image: url(undelete.png);\n    }\n\n    div.rioccurrencesactions a.rirefreshbutton {\n        background-image: url(refresh.png);\n        color: transparent;\n        margin-top: 4px;\n        margin-right: 5px;\n    }\n\n    div.messagearea,\n    div.errorarea {\n        background-color: red;\n        color: white;\n        font-weight: bold;\n        padding: 2px 10px;\n    }\n\n    div.ributtons .risavebutton {\n        display: block;\n        margin: 30px auto 0;\n    }\n</style>\n\n<div class="ridisplay">\n    <div class="rimain">\n        <input type="checkbox" id="{{name}}enable" name="richeckbox" ng-show="!conf.readOnly" ng-change="enableChanged()" ng-model="ri.enabled" />\n        <label class="ridisplay" for="{{name}}enable" ng-show="!ri.enabled">{{i18n.displayUnactivate}}</label>\n		<label class="ridisplay" ng-show="ri.enabled">{{ri.display}}</label>\n        <a ng-show="!conf.readOnly && ri.enabled" ng-click="ri.showForm()">{{i18n.edit_rules}}</a>\n    </div>\n    <div class="rioccurrences" style="display:none" />\n</div>',e["riform.html"]='<div class="modal-dialog">\n    <div class="modal-content">\n        <div class="modal-header" data-ng-show="message">\n            <h4 data-ng-bind="message"></h4>\n        </div>\n        <div class="modal-body">\n            <div class="riform">\n                <form ng-submit="ri.save()">\n                    <h1>{{i18n.title}}</h1>\n                    <div class="messagearea" ng-show="ri.messageAreaText" ng-bind="ri.messageAreaText">\n                    </div>\n                    <div class="rirtemplate">\n                        <label for="{{name}}rtemplate" class="rilabel">\n                            {{i18n.recurrenceType}}\n                        </label>\n                        <select ng-model="ri.rtemplate" name="rirtemplate" class="rifield" ng-options="v as i18n.rtemplate[k] for (k,v) in conf.rtemplate"></select>\n                        <div>\n                            <div class="riformfields">\n                                <div ng-show="ri.showridailyinterval()" class="rifield">\n                                    <label for="{{name}}dailyinterval" class="rilabel">\n                                        {{i18n.dailyInterval1}}\n                                    </label>\n                                    <div class="field">\n                                        <input type="text" size="2"\n                                               value="1"\n                                               ng-model="ri.dailyinterval"\n                                               id="{{name}}dailyinterval" />\n                                        {{i18n.dailyInterval2}}\n                                    </div>\n                                </div>\n                                <div ng-show="ri.showriweeklyinterval()" class="rifield">\n                                    <label for="{{name}}weeklyinterval" class="rilabel">\n                                        {{i18n.weeklyInterval1}}\n                                    </label>\n                                    <div class="field">\n                                        <input type="text" size="2"\n                                               value="1"\n                                               ng-model="ri.weeklyinterval"\n                                               id="{{name}}weeklyinterval" />\n                                        {{i18n.weeklyInterval2}}\n                                    </div>\n                                </div>\n                                <div ng-show="ri.showriweeklyweekdays()" class="rifield riweeklyweekdays">\n                                    <label class="rilabel" for="{{name}}weeklyinterval">{{i18n.weeklyWeekdays}}</label>\n                                    <div class="field">\n                                        <div class="riweeklyweekday" ng-repeat="weekday in conf.orderedWeekdays">\n                                            <input type="checkbox"\n                                                   name="riweeklyweekdays{{weekdays[weekday]}}"\n                                                   id="{{name}}weeklyWeekdays{{weekdays[weekday]}}"\n                                                   ng-model="ri.weeklyweekdays[weekday]" />\n                                            <label for="{{name}}weeklyWeekdays{{weekdays[weekday]}}">{{i18n.shortWeekdays[weekday]}}</label>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div ng-show="ri.showrimonthlyinterval()" class="rifield">\n                                    <label for="rimonthlyinterval" class="rilabel">{{i18n.monthlyInterval1}}</label>\n                                    <div class="field">\n                                        <input type="text" size="2"\n                                               value="1"\n                                               ng-model="ri.monthlyinterval" />\n                                        {{i18n.monthlyInterval2}}\n                                    </div>\n                                </div>\n                                <div ng-show="ri.showrimonthlyoptions()" class="rifield rimonthlyoptions">\n                                    <label for="rimonthlytype" class="rilabel">{{i18n.monthlyRepeatOn}}</label>\n                                    <div class="field">\n                                        <div>\n                                            <input type="radio"\n                                                   value="DAYOFMONTH"\n                                                   ng-model="ri.monthlytype"\n                                                   id="{{name}}monthlytype:DAYOFMONTH" />\n                                            <label for="{{name}}monthlytype:DAYOFMONTH">\n                                                {{i18n.monthlyDayOfMonth1}}\n                                            </label>\n                                            <select ng-model="ri.monthlydayofmonthday" id="{{name}}monthlydayofmonthday"\n                                                    ng-options="o as o for o in [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31]"></select>\n                                            {{i18n.monthlyDayOfMonth2}}\n                                        </div>\n                                        <div>\n                                            <input type="radio"\n                                                   value="WEEKDAYOFMONTH"\n                                                   ng-model="ri.monthlytype"\n                                                   id="{{name}}monthlytype:WEEKDAYOFMONTH" />\n                                            <label for="{{name}}monthlytype:WEEKDAYOFMONTH">\n                                                {{i18n.monthlyWeekdayOfMonth1}}\n                                            </label>\n                                            <select ng-model="ri.monthlyweekdayofmonthindex" ng-options="conf.orderIndexes[i] as o for (i,o) in i18n.orderIndexes"></select>\n                                            {{i18n.monthlyWeekdayOfMonth2}}\n                                            <select ng-model="ri.monthlyweekdayofmonth" ng-options="conf.weekdays[o] as i18n.weekdays[o] for o in conf.orderedWeekdays"></select>\n                                            {{i18n.monthlyWeekdayOfMonth3}}\n                                        </div>\n                                    </div>\n                                </div>\n                                <div ng-show="ri.showriyearlyinterval()" class="rifield">\n                                    <label for="riyearlyinterval" class="rilabel">{{i18n.yearlyInterval1}}</label>\n                                    <div class="field">\n                                        <input type="text" size="2"\n                                               value="1"\n                                               ng-model="ri.yearlyinterval" />\n                                        {{i18n.yearlyInterval2}}\n                                    </div>\n                                </div>\n                                <div ng-show="ri.showriyearlyoptions()" class="rifield riyearlyoptions">\n                                    <label for="riyearlyType" class="rilabel">{{i18n.yearlyRepeatOn}}</label>\n                                    <div class="field">\n                                        <div>\n                                            <input type="radio"\n                                                   value="DAYOFMONTH"\n                                                   ng-model="ri.yearlyType"\n                                                   id="{{name}}yearlytype:DAYOFMONTH" />\n                                            <label for="{{name}}yearlytype:DAYOFMONTH">\n                                                {{i18n.yearlyDayOfMonth1}}\n                                            </label>\n                                            <select ng-model="ri.yearlydayofmonthmonth" ng-options="i18n.months.indexOf(m)+1 as m for m in i18n.months"></select>\n                                            {{i18n.yearlyDayOfMonth2}}\n                                            <select ng-model="ri.yearlydayofmonthday"\n                                                    ng-options="o as o for o in [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31]"></select>\n                                            {{i18n.yearlyDayOfMonth3}}\n                                        </div>\n                                        <div>\n                                            <input type="radio"\n                                                   value="WEEKDAYOFMONTH"\n                                                   ng-model="ri.yearlyType"\n                                                   id="{{name}}yearlytype:WEEKDAYOFMONTH" />\n                                            <label for="{{name}}yearlytype:WEEKDAYOFMONTH">\n                                                {{i18n.yearlyWeekdayOfMonth1}}\n                                            </label>\n                                            <select ng-model="ri.yearlyweekdayofmonthindex" ng-options="conf.orderIndexes[i] as o for (i,o) in i18n.orderIndexes"></select>\n                                            <label for="{{name}}yearlytype:WEEKDAYOFMONTH">\n                                                {{i18n.yearlyWeekdayOfMonth2}}\n                                            </label>\n                                            <select ng-model="ri.yearlyweekdayofmonthday" ng-options="conf.weekdays[o] as i18n.weekdays[o] for o in conf.orderedWeekdays"></select>\n                                            {{i18n.yearlyWeekdayOfMonth3}}\n                                            <select ng-model="ri.yearlyweekdayofmonthmonth" ng-options="i18n.months.indexOf(m)+1 as m for m in i18n.months"></select>\n                                            {{i18n.yearlyWeekdayOfMonth4}}\n                                        </div>\n                                    </div>\n                                </div>\n                                <div ng-show="ri.showrirangeoptions()" class="rifield rirangeoptions">\n                                    <label class="rilabel">{{i18n.range}}</label>\n                                    <div class="field">\n                                        <div ng-show="conf.hasRepeatForeverButton">\n                                            <input type="radio"\n                                                   value="NOENDDATE"\n                                                   ng-model="ri.rangetype"\n                                                   id="{{name}}rangetype:NOENDDATE" />\n                                            <label for="{{name}}rangetype:NOENDDATE">\n                                                {{i18n.rangeNoEnd}}\n                                            </label>\n                                        </div>\n                                        <div>\n                                            <input type="radio"\n                                                   checked="checked"\n                                                   value="BYOCCURRENCES"\n                                                   ng-model="ri.rangetype"\n                                                   id="{{name}}rangetype:BYOCCURRENCES" />\n                                            <label for="{{name}}rangetype:BYOCCURRENCES">\n                                                {{i18n.rangeByOccurrences1}}\n                                            </label>\n                                            <input type="text" size="3"\n                                                   value="10"\n                                                   ng-model="ri.rangebyoccurrencesvalue" />\n                                            {{i18n.rangeByOccurrences2}}\n                                        </div>\n                                        <div>\n                                            <input type="radio"\n                                                   value="BYENDDATE"\n                                                   ng-model="ri.rangetype"\n                                                   id="{{name}}rangetype:BYENDDATE" />\n                                            <label for="{{name}}rangetype:BYENDDATE">\n                                                {{i18n.rangeByEndDate}}\n                                            </label>\n                                            <input type="text" ng-model="ri.rangebyenddate" datepicker-popup="MM/dd/yyyy" />\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="rioccurrencesactions" ng-show="ri.showrioccurrencesactions">\n                                <div class="rioccurancesheader">\n                                    <h2>{{i18n.preview}}</h2>\n                                    <span class="refreshbutton action">\n                                        <a class="rirefreshbutton" href="#" title="{{i18n.refresh}}">\n                                            {{i18n.refresh}}\n                                        </a>\n                                    </span>\n                                </div>\n                            </div>\n                            <div class="rioccurrences">\n                            </div>\n                            <div class="rioccurrencesactions" ng-show="ri.showrioccurrencesactions">\n                                <div class="rioccurancesheader">\n                                    <h2>{{i18n.addDate}}</h2>\n                                </div>\n                                <div class="riaddoccurrence">\n                                    <div class="errorarea" ng-bind="ri.errorsText" ng-show="ri.errorsText"></div>\n                                    <input type="date" name="adddate" id="adddate" />\n                                    <input type="button" name="addaction" id="addaction" value="{{i18n.add}}">\n                                </div>\n                            </div>\n                            <br />\n                        </div>\n                    </div>\n                </form>\n            </div>\n        </div>\n        <div class="modal-footer">\n            <button class="btn btn-primary" data-ng-click="ri.save()">{{i18n.save}}</button>\n            <button class="btn btn-warning" data-ng-click="ri.cancel()">{{i18n.cancel}}</button>\n        </div>\n    </div>\n</div>\n<!--<div class="rioccurrences">\n\n    {{each occurrences}}\n    <div class="occurrence {{occurrences[$index].type}}">\n\n        <span>\n\n            {{occurrences[$index].formattedDate}}\n            {{if occurrences[$index].type === "start"}}\n            <span class="rlabel">{{i18n.recurrenceStart}}</span>\n            {{/if}}\n            {{if occurrences[$index].type === "rdate"}}\n            <span class="rlabel">{{i18n.additionalDate}}</span>\n            {{/if}}\n\n        </span>\n        {{if !readOnly}}\n        <span class="action">\n\n            {{if occurrences[$index].type === "rrule"}}\n            <a date="{{occurrences[$index].date}}" href="#"\n                                class="{{occurrences[$index].type}}" title="{{i18n.exclude}}">\n\n                {{i18n.exclude}}\n\n            </a>\n            {{/if}}\n            {{if occurrences[$index].type === "rdate"}}\n            <a date="{{occurrences[$index].date}}" href="#"\n                                class="{{occurrences[$index].type}}" title="{{i18n.remove}}">\n\n                {{i18n.remove}}\n\n            </a>\n            {{/if}}\n            {{if occurrences[$index].type === "exdate"}}\n            <a date="{{occurrences[$index].date}}" href="#"\n                                class="{{occurrences[$index].type}}" title="{{i18n.include}}">\n\n                {{i18n.include}}\n\n            </a>\n            {{/if}}\n\n        </span>\n        {{/if}}\n\n    </div>\n    {{/each}}\n    <div class="batching">\n\n        {{each batch.batches}}\n        {{if $index === batch.currentBatch}}<span class="current">\n            {{/if}}\n            <a href="#" start="{{batch.batches[$index][0]}}">[{{batch.batches[$index][0]}} - {{batch.batches[$index][1]}}]</a>\n            {{if $index === batch.currentBatch}}\n        </span>{{/if}}\n        {{/each}}\n\n    </div>\n</div>-->\n';var f=function(){var a={},b={conf:{lang:"en",readOnly:!1,firstDay:0,startField:null,startFieldYear:null,startFieldMonth:null,startFieldDay:null,ajaxURL:null,ajaxContentType:"application/json; charset=utf8",ributtonExtraClass:"",hasRepeatForeverButton:!0,rtemplate:{daily:{rrule:"FREQ=DAILY",fields:["ridailyinterval","rirangeoptions"]},mondayfriday:{rrule:"FREQ=WEEKLY;BYDAY=MO,FR",fields:["rirangeoptions"]},weekdays:{rrule:"FREQ=WEEKLY;BYDAY=MO,TU,WE,TH,FR",fields:["rirangeoptions"]},weekly:{rrule:"FREQ=WEEKLY",fields:["riweeklyinterval","riweeklyweekdays","rirangeoptions"]},monthly:{rrule:"FREQ=MONTHLY",fields:["rimonthlyinterval","rimonthlyoptions","rirangeoptions"]},yearly:{rrule:"FREQ=YEARLY",fields:["riyearlyinterval","riyearlyoptions","rirangeoptions"]}}},localize:function(b,c){a[b]=c},setTemplates:function(c,d){var e,f;b.conf.rtemplate=c;for(e in d)if(d.hasOwnProperty(e))for(f in d[e])d[e].hasOwnProperty(f)&&(a[e].rtemplate[f]=d[e][f])}};return b.localize("en",{displayUnactivate:"Repeat...",displayActivate:"Repeats every",add_rules:"Add",edit_rules:"Edit...",delete_rules:"Delete",add:"Add",refresh:"Refresh",title:"Repeat",preview:"Selected dates",addDate:"Add date",recurrenceType:"Repeats:",dailyInterval1:"Repeat every:",dailyInterval2:"days",weeklyInterval1:"Repeat every:",weeklyInterval2:"week(s)",weeklyWeekdays:"Repeat on:",weeklyWeekdaysHuman:"on:",monthlyInterval1:"Repeat every:",monthlyInterval2:"month(s)",monthlyDayOfMonth1:"Day",monthlyDayOfMonth1Human:"on day",monthlyDayOfMonth2:"of the month",monthlyDayOfMonth3:"month(s)",monthlyWeekdayOfMonth1:"The",monthlyWeekdayOfMonth1Human:"on the",monthlyWeekdayOfMonth2:"",monthlyWeekdayOfMonth3:"of the month",monthlyRepeatOn:"Repeat on:",yearlyInterval1:"Repeat every:",yearlyInterval2:"year(s)",yearlyDayOfMonth1:"Every",yearlyDayOfMonth1Human:"on",yearlyDayOfMonth2:"",yearlyDayOfMonth3:"",yearlyWeekdayOfMonth1:"The",yearlyWeekdayOfMonth1Human:"on the",yearlyWeekdayOfMonth2:"",yearlyWeekdayOfMonth3:"of",yearlyWeekdayOfMonth4:"",yearlyRepeatOn:"Repeat on:",range:"End recurrence:",rangeNoEnd:"Never",rangeByOccurrences1:"After",rangeByOccurrences1Human:"ends after",rangeByOccurrences2:"occurrence(s)",rangeByEndDate:"On",rangeByEndDateHuman:"until",including:", and also",except:", except for",cancel:"Cancel",save:"Save",recurrenceStart:"Start of the recurrence",additionalDate:"Additional date",include:"Include",exclude:"Exclude",remove:"Remove",orderIndexes:["first","second","third","fourth","last"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortWeekdays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longDateFormat:"mmmm dd, yyyy",shortDateFormat:"mm/dd/yyyy",unsupportedFeatures:"Warning: This event uses recurrence features not supported by this widget. Saving the recurrence may change the recurrence in unintended ways:",noTemplateMatch:"No matching recurrence template",multipleDayOfMonth:"This widget does not support multiple days in monthly or yearly recurrence",bysetpos:"BYSETPOS is not supported",noRule:"No RRULE in RRULE data",noRepeatEvery:'Error: The "Repeat every"-field must be between 1 and 1000',noEndDate:"Error: End date is not set. Please set a correct value",noRepeatOn:'Error: "Repeat on"-value must be selected',noEndRecurrence:'Error: "End recurrence"-value must be selected',pastEndDate:"Error: End date cannot be before start date",noEndAfterNOccurrences:'Error: The "After N occurrences"-field must be between 1 and 1000',alreadyAdded:"This date was already added",rtemplate:{daily:"Daily",mondayfriday:"Monday and Friday",weekdays:"Weekday",weekly:"Weekly",monthly:"Monthly",yearly:"Yearly"}}),{restrict:"E",template:e["ridisplay.html"],scope:{xrrule:"=ngModel",riConfig:"=",riName:"=",EXDATES:"=riExdates",RDATES:"=riRdates",riStartDate:"="},link:function(){},controller:function(c,f){function g(a,b){for(a=a.toString(),b=b||2;a.length<b;)a="0"+a;return a}function h(a,b,c){var d=a.getDate(),e=a.getDay(),f=a.getMonth(),h=a.getFullYear(),i={d:d,dd:g(d),ddd:c.i18n.shortWeekdays[e],dddd:c.i18n.weekdays[e],m:f+1,mm:g(f+1),mmm:c.i18n.shortMonths[f],mmmm:c.i18n.months[f],yy:String(h).slice(2),yyyy:h},j=b.replace(p,function(a){return i.hasOwnProperty(a)?i[a]:a.slice(1,a.length-1)});return j}function i(a){var b=c.ri.rtemplate,e=b.rrule,f="";for(var g in q.rtemplate)if(q.rtemplate.hasOwnProperty(g)&&q.rtemplate[g]===b){f=g;break}var i,j,k,l,m,n,o,p,r,s,t,u,v,w,x=q.i18n.rtemplate[f];for(m=0;m<b.fields.length;m++)switch(i=b.fields[m]){case"ridailyinterval":t=c.ri.dailyinterval,"1"!==t&&(e+=";INTERVAL="+t),x=t+" "+q.i18n.dailyInterval2;break;case"riweeklyinterval":t=c.ri.weeklyinterval,"1"!==t&&(e+=";INTERVAL="+t),x=t+" "+q.i18n.weeklyInterval2;break;case"riweeklyweekdays":for(k="",l="",n=0;n<q.weekdays.length;n++)j=c.ri.weeklyweekdays[n],j&&(k&&(k+=",",l+=", "),k+=q.weekdays[n],l+=q.i18n.weekdays[n]);k&&(e+=";BYDAY="+k,x+=" "+q.i18n.weeklyWeekdaysHuman+" "+l);break;case"rimonthlyinterval":t=c.ri.monthlyinterval,"1"!==t&&(e+=";INTERVAL="+t),x=t+" "+q.i18n.monthlyInterval2;break;case"rimonthlyoptions":var y=c.ri.monthlytype;switch(y){case"DAYOFMONTH":r=c.ri.monthlydayofmonthday,e+=";BYMONTHDAY="+r,x+=", "+q.i18n.monthlyDayOfMonth1Human+" "+r+" "+q.i18n.monthlyDayOfMonth2;break;case"WEEKDAYOFMONTH":o=c.ri.monthlyweekdayofmonthindex,r=c.ri.monthlyweekdayofmonth,$.inArray(r,["MO","TU","WE","TH","FR","SA","SU"])>-1&&(e+=";BYDAY="+o+r,x+=", "+q.i18n.monthlyWeekdayOfMonth1Human+" ",x+=" "+q.i18n.orderIndexes[$.inArray(o,q.orderIndexes)],x+=" "+q.i18n.monthlyWeekdayOfMonth2,x+=" "+q.i18n.weekdays[$.inArray(r,q.weekdays)],x+=" "+q.i18n.monthlyDayOfMonth2)}break;case"riyearlyinterval":t=c.ri.yearlyinterval,"1"!==t&&(e+=";INTERVAL="+t),x=t+" "+q.i18n.yearlyInterval2;break;case"riyearlyoptions":switch(u=c.ri.yearlyType){case"DAYOFMONTH":s=c.ri.yearlydayofmonthmonth,r=c.ri.yearlydayofmonthday,e+=";BYMONTH="+s,e+=";BYMONTHDAY="+r,x+=", "+q.i18n.yearlyDayOfMonth1Human+" "+q.i18n.months[s-1]+" "+r;break;case"WEEKDAYOFMONTH":o=c.ri.yearlyweekdayofmonthindex,r=c.ri.yearlyweekdayofmonthday,s=c.ri.yearlyweekdayofmonthmonth,e+=";BYMONTH="+s,$.inArray(r,["MO","TU","WE","TH","FR","SA","SU"])>-1&&(e+=";BYDAY="+o+r,x+=", "+q.i18n.yearlyWeekdayOfMonth1Human,x+=" "+q.i18n.orderIndexes[$.inArray(o,q.orderIndexes)],x+=" "+q.i18n.yearlyWeekdayOfMonth2,x+=" "+q.i18n.weekdays[$.inArray(r,q.weekdays)],x+=" "+q.i18n.yearlyWeekdayOfMonth3,x+=" "+q.i18n.months[s-1],x+=" "+q.i18n.yearlyWeekdayOfMonth4)}break;case"rirangeoptions":var z=c.ri.rangetype;switch(z){case"BYOCCURRENCES":v=c.ri.rangebyoccurrencesvalue,e+=";COUNT="+v,x+=", "+q.i18n.rangeByOccurrences1Human,x+=" "+v,x+=" "+q.i18n.rangeByOccurrences2;break;case"BYENDDATE":w=h(c.ri.rangebyenddate,"yyyymmdd",q),e+=";UNTIL="+w+"T235959",a===!0&&(e+="Z"),x+=", "+q.i18n.rangeByEndDateHuman,x+=" "+h(c.ri.rangebyenddate,q.i18n.longDateFormat,q)}}if(c.RDATES!==d&&c.RDATES.length>0){for(c.RDATES.sort(),p=[],m=0;m<c.RDATES.length;m++)""!==c.RDATES[m]&&p.push(h(c.RDATES[m],q.i18n.longDateFormat,q));0!==p.length&&(x=x+q.i18n.including+" "+p.join("; "))}if(c.EXDATE!==d&&c.EXDATE.length>0){for(c.EXDATE.sort(),p=[],m=0;m<c.EXDATE.length;m++)""!==c.EXDATE[m]&&p.push(h(c.EXDATES[m],q.i18n.longDateFormat,q));0!==p.length&&(x=x+q.i18n.except+" "+p.join("; "))}return e=e,{result:e,description:x}}function j(a,b){var d,e,f,g,h,i,j,k,l,m,n,o,p,r,s,t,u,v,w,x,y,z,A,B=[];if(a){e=/INTERVAL=([0-9]+);?/.exec(a),n=e?e[1]:"1",e=/BYDAY=([^;]+);?/.exec(a),o=e?e[1]:"",e=/BYMONTHDAY=([^;]+);?/.exec(a),r=e?e[1].split(","):null,e=/BYMONTH=([^;]+);?/.exec(a),p=e?e[1].split(","):null,e=/COUNT=([0-9]+);?/.exec(a),s=e?e[1]:null,e=/UNTIL=([0-9T]+);?/.exec(a),t=e?e[1]:null,e=/BYSETPOS=([^;]+);?/.exec(a),e&&B.push(q.i18n.bysetpos),f="",g=null;for(d in q.rtemplate)q.rtemplate.hasOwnProperty(d)&&(h=q.rtemplate[d],0===a.indexOf(h.rrule)&&a.length>f.length&&(f=a,g=d));if(f)h=q.rtemplate[g],c.ri.rtemplate=h,l=g;else{for(h in q.rtemplate)if(q.rtemplate.hasOwnProperty(h)){h=q.rtemplate[h];break}B.push(q.i18n.noTemplateMatch)}for(d=0;d<h.fields.length;d++)switch(m=h.fields[d]){case"ridailyinterval":c.ri.dailyinterval=n;break;case"riweeklyinterval":c.ri.weeklyinterval=n;break;case"riweeklyweekdays":for(o=o.split(","),i=0;i<q.weekdays.length;i++)u=q.weekdays[i],j=c.ri.weeklyweekdays[i]=-1!==$.inArray(u,o);break;case"rimonthlyinterval":c.ri.monthlyinterval=n;break;case"rimonthlyoptions":var C="DAYOFMONTH";r&&(C="DAYOFMONTH",r.length>1&&(B.push(q.i18n.multipleDayOfMonth),r=r[0]),c.ri.monthlydayofmonthday=parseInt(r,10)),o&&(C="WEEKDAYOFMONTH",-1!==o.indexOf(",")&&(B.push(q.i18n.multipleDayOfMonth),o=o.split(",")[0]),k=o.slice(0,-2),"+"!==k.charAt(0)&&"-"!==k.charAt(0)&&(k="+"+k),A=o.slice(-2),c.ri.monthlyweekdayofmonthindex=k,c.ri.monthlyweekdayofmonth=A),c.ri.monthlytype=C;break;case"riyearlyinterval":c.ri.yearlyinterval=n;break;case"riyearlyoptions":var D="DAYOFMONTH";r&&(D="DAYOFMONTH",r.length>1&&(B.push(q.i18n.multipleDayOfMonth),r=r[0]),c.ri.yearlydayofmonthmonth=parseInt(p,10),c.ri.yearlydayofmonthday=parseInt(r,10)),o&&(D="WEEKDAYOFMONTH",-1!==o.indexOf(",")&&(B.push(q.i18n.multipleDayOfMonth),o=o.split(",")[0]),k=o.slice(0,-2),"+"!==k.charAt(0)&&"-"!==k.charAt(0)&&(k="+"+k),A=o.slice(-2),c.ri.yearlyweekdayofmonthindex=k,c.ri.yearlyweekdayofmonthday=A,c.ri.yearlyweekdayofmonthmonth=parseInt(p,10)),c.ri.yearlyType=D;break;case"rirangeoptions":var E="NOENDDATE";s&&(E="BYOCCURRENCES",c.ri.rangebyoccurrencesvalue=s),t&&(E="BYENDDATE",w=t.slice(0,4),v=t.slice(4,6),v=parseInt(v,10)-1,u=t.slice(6,8),x=t.slice(9,11),y=t.slice(11,13),z=t.slice(13,15),c.ri.rangebyenddatecalendar=new Date(w,v,u,x,y,z)),c.ri.rangetype=E}}else if(B.push(q.i18n.noRule),!b)return-1;return 0!==B.length?(c.ri.messageAreaText=q.i18n.unsupportedFeatures+" "+B.join("; "),1):(c.ri.messageAreaText="",0)}function k(a){var b,e,f;a?(j(a,!0),l()):c.ri.display=q.i18n.noRule,b=c.ri.StartDate,null!==b&&b!==d?(c.ri.monthlydayofmonthday=b.getDate(),e=q.orderIndexes[Math.floor((b.getDate()-1)/7)],f=q.weekdays[b.getDay()],c.ri.monthlyweekdayofmonthindex=e,c.ri.monthlyweekdayofmonth=f,c.ri.yearlydayofmonthmonth=b.getMonth()+1,c.ri.yearlydayofmonthday=b.getDate(),c.ri.yearlyweekdayofmonthindex=e,c.ri.yearlyweekdayofmonthday=f,c.ri.yearlyweekdayofmonthmonth=b.getMonth()+1,c.ri.showrioccurrencesactions=!0):c.ri.showrioccurrencesactions=!1
}function l(){var a=i(!0);c.ri.display=q.i18n.displayActivate+" "+a.description,c.xrrule=a.result;c.ri.StartDate}function m(){c.ri.display=q.i18n.displayUnactivate,c.xrrule=null,c.ri.enabled=!1}function n(){var a,b,d;if(a=c.riStartDate,c.ri.messageAreaText="",c.ri.errorsText="",c.ri.showridailyinterval()&&(d=c.ri.dailyinterval,!d||1>d||d>1e3))return c.ri.messageAreaText=q.i18n.noRepeatEvery,!1;if(c.ri.showriweeklyinterval()&&(d=c.ri.weeklyinterval,!d||1>d||d>1e3))return c.ri.messageAreaText=q.i18n.noRepeatEvery,!1;if(c.ri.showrimonthlyinterval()){if(d=c.ri.monthlyinterval,!d||1>d||d>1e3)return c.ri.messageAreaText=q.i18n.noRepeatEvery,!1;if(!c.ri.monthlytype)return c.ri.messageAreaText=q.i18n.noRepeatOn,!1}if(c.ri.showriyearlyinterval()){if(d=c.ri.yearlyinterval,!d||1>d||d>1e3)return c.ri.messageAreaText=q.i18n.noRepeatEvery,!1;if(!c.ri.yearlyType)return c.ri.messageAreaText=q.i18n.noRepeatOn,!1}if("BYOCCURRENCES"==c.ri.rangetype&&(d=c.ri.rangebyoccurrencesvalue,!d||1>d||d>1e3))return c.ri.messageAreaText=q.i18n.noEndAfterNOccurrences,!1;if("BYENDDATE"==c.ri.rangetype){if(b=new Date(c.ri.rangebyenddate),isNaN(b.getTime()))return c.ri.messageAreaText=q.i18n.noEndDate,!1;if(a>b)return c.ri.messageAreaText=q.i18n.pastEndDate,!1}return c.ri.rangetype?!0:(c.ri.messageAreaText=q.i18n.noEndRecurrence,!1)}function o(){c.ri.enabled=c.xrrule&&!0||!1,k(c.xrrule)}c.ri={};var p=/d{1,4}|m{1,4}|yy(?:yy)?|"[^"]*"|'[^']*'/g,q=angular.extend({},b.conf);angular.extend(q,c.riConfig),angular.extend(q,{i18n:a[q.lang],name:c.riName}),c.conf=q;var r,s,t=[];for(s=0;7>s;s++)r=s+q.firstDay,r>6&&(r-=7),t.push(r);$.extend(q,{orderIndexes:["+1","+2","+3","+4","-1"],weekdays:["SU","MO","TU","WE","TH","FR","SA"],orderedWeekdays:t}),c.ri.showridailyinterval=function(){return c.ri.rtemplate&&-1!=c.ri.rtemplate.fields.indexOf("ridailyinterval")},c.ri.showrirangeoptions=function(){return c.ri.rtemplate&&-1!=c.ri.rtemplate.fields.indexOf("rirangeoptions")},c.ri.showriweeklyinterval=function(){return c.ri.rtemplate&&-1!=c.ri.rtemplate.fields.indexOf("riweeklyinterval")},c.ri.showriweeklyweekdays=function(){return c.ri.rtemplate&&-1!=c.ri.rtemplate.fields.indexOf("riweeklyweekdays")},c.ri.showrimonthlyinterval=function(){return c.ri.rtemplate&&-1!=c.ri.rtemplate.fields.indexOf("rimonthlyinterval")},c.ri.showrimonthlyoptions=function(){return c.ri.rtemplate&&-1!=c.ri.rtemplate.fields.indexOf("rimonthlyoptions")},c.ri.showriyearlyinterval=function(){return c.ri.rtemplate&&-1!=c.ri.rtemplate.fields.indexOf("riyearlyinterval")},c.ri.showriyearlyoptions=function(){return c.ri.rtemplate&&-1!=c.ri.rtemplate.fields.indexOf("riyearlyoptions")},c.enableChanged=function(){c.ri.enabled?(c.ri.showForm(),l()):m()},c.toggleRecurrence=function(){c.ri.enabled&&c.ri.showForm()},c.ri.save=function(){n()&&(c.ri.hideForm(),c.ri.enabled=!0,l())},c.ri.cancel=function(){c.ri.hideForm(),o()},c.ri.showForm=function(){var a=c;c.ri.enabled&&(c.modal=f.open({backdrop:!0,template:e["riform.html"],controller:function(b,c){b.ri=a.ri,b.i18n=a.i18n,b.conf=a.conf,b.ri.$modalInstance=c,b.name=a.name}}))},c.ri.hideForm=function(){c.ri.$modalInstance&&c.ri.$modalInstance.close()},c.ical={RDATE:[],EXDATE:[]},c.i18n=c.conf.i18n,angular.extend(c.ri,{dailyinterval:1,weeklyinterval:1,weeklyweekdays:[!1,!1,!1,!1,!1,!1,!1],monthlyinterval:1,monthlydayofmonthday:1,monthlyweekdayofmonthindex:"+1",monthlyweekdayofmonth:"SU",yearlyinterval:1,yearlydayofmonthmonth:1,yearlydayofmonthday:1,yearlyweekdayofmonthindex:"+1",yearlyweekdayofmonthday:"SU",yearlyweekdayofmonthmonth:1}),c.$watch("xrrule",o)}}};"function"==typeof c&&c.amd?c("riDirective",function(){return f}):a.riDirective=riDirecetive}(window,document,define);